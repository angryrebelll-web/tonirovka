# üìã –û–¢–ß–Å–¢ –û–ë –£–î–ê–õ–ï–ù–ò–ò –í–°–ï–• –ü–ï–†–ï–•–û–î–û–í –ü–û URL

**–î–∞—Ç–∞:** 2025-12-07  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ü–ï–†–ï–•–û–î–´ –£–î–ê–õ–ï–ù–´

---

## üîç –ù–ê–ô–î–ï–ù–ù–´–ï –ü–ï–†–ï–•–û–î–´ –ü–û URL

### 1. –§—É–Ω–∫—Ü–∏—è `closeCalculator()` (—Å—Ç—Ä–æ–∫–∏ 346-362)

**–ù–∞–π–¥–µ–Ω–æ:**
```javascript
if (window.location.pathname.includes('/calculator/') || window.location.pathname.includes('/calculator')) {
    setTimeout(() => {
        try {
            if (document.referrer && document.referrer.includes(window.location.origin) && !document.referrer.includes('/calculator')) {
                window.history.back();  // ‚ùå –£–î–ê–õ–ï–ù–û
            } else {
                window.location.href = '../';  // ‚ùå –£–î–ê–õ–ï–ù–û
            }
        } catch (e) {
            window.location.href = '../';  // ‚ùå –£–î–ê–õ–ï–ù–û
        }
    }, 300);
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```javascript
// –ù–ï –¥–µ–ª–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
// –ü—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏ –æ—Å—Ç–∞—ë–º—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
```

---

### 2. –§—É–Ω–∫—Ü–∏—è `closeBookingModal()` (—Å—Ç—Ä–æ–∫–∏ 1567-1604)

**–ù–∞–π–¥–µ–Ω–æ:**
```javascript
const isCalculatorPage = window.location.pathname.includes('/calculator/') || 
                         window.location.pathname.includes('/calculator') ||
                         window.location.pathname.endsWith('/calculator');

if (isCalculatorPage) {
    setTimeout(() => {
        try {
            const basePath = window.location.pathname.split('/calculator')[0] || '/';
            window.location.href = basePath === '/' ? '/' : basePath + '/';  // ‚ùå –£–î–ê–õ–ï–ù–û
        } catch (e) {
            try {
                window.history.back();  // ‚ùå –£–î–ê–õ–ï–ù–û
            } catch (e2) {
                window.location.href = '/';  // ‚ùå –£–î–ê–õ–ï–ù–û
            }
        }
    }, 100);
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```javascript
// –ù–ï –¥–µ–ª–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É - —Ñ–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –º–æ–¥–∞–ª–∫–∞
// –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ —à–∞–≥—É 4 –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
if (calculatorFullscreen) {
    const calculatorModal = calculatorFullscreen.querySelector(".calculator-modal");
    if (calculatorModal) {
        calculatorModal.style.display = "";
    }
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —à–∞–≥—É (—à–∞–≥ 4 - –∏—Ç–æ–≥)
    if (currentStep !== 4) {
        goToStep(4);
    }
}
```

---

### 3. –§—É–Ω–∫—Ü–∏—è `closeRequestForm()` (—Å—Ç—Ä–æ–∫–∏ 1434-1455)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
‚úÖ **–ù–ï–¢ –ü–ï–†–ï–•–û–î–û–í** - —Ñ—É–Ω–∫—Ü–∏—è —É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `goToStep(4)`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –ó–∞–º–µ–Ω—ë–Ω `updateStepDisplay()` –Ω–∞ `goToStep(4)` –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è

---

## ‚úÖ –£–î–ê–õ–Å–ù–ù–´–ï –ü–ï–†–ï–•–û–î–´

### –í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤: **6**

1. ‚ùå `window.location.href = '../'` (—Å—Ç—Ä–æ–∫–∞ 355) - –≤ `closeCalculator()`
2. ‚ùå `window.location.href = '../'` (—Å—Ç—Ä–æ–∫–∞ 359) - –≤ `closeCalculator()`
3. ‚ùå `window.history.back()` (—Å—Ç—Ä–æ–∫–∞ 353) - –≤ `closeCalculator()`
4. ‚ùå `window.location.href = basePath === '/' ? '/' : basePath + '/'` (—Å—Ç—Ä–æ–∫–∞ 1579) - –≤ `closeBookingModal()`
5. ‚ùå `window.history.back()` (—Å—Ç—Ä–æ–∫–∞ 1583) - –≤ `closeBookingModal()`
6. ‚ùå `window.location.href = '/'` (—Å—Ç—Ä–æ–∫–∞ 1585) - –≤ `closeBookingModal()`

---

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–û–ï –ü–û–í–ï–î–ï–ù–ò–ï

### –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã –∑–∞—è–≤–∫–∏:

1. ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è (`modal.classList.add('hidden')`)
2. ‚úÖ Overlay –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è (—á–µ—Ä–µ–∑ CSS –∏ inline —Å—Ç–∏–ª–∏)
3. ‚úÖ –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ body –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (`document.body.style.overflow = ''`)
4. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —à–∞–≥—É 4 –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (`goToStep(4)`)
5. ‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–Ω–æ–≤–∞
6. ‚úÖ **–ù–ò–ö–ê–ö–ò–• –ü–ï–†–ï–•–û–î–û–í –ü–û URL**

### –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞:

1. ‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
2. ‚úÖ –í—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
3. ‚úÖ Body –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
4. ‚úÖ **–ù–ò–ö–ê–ö–ò–• –ü–ï–†–ï–•–û–î–û–í –ü–û URL** - –æ—Å—Ç–∞—ë–º—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

---

## üß™ –ü–†–û–í–ï–†–ï–ù–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò

### ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –∫—Ä–µ—Å—Ç–∏–∫–æ–º:
- –§–æ—Ä–º–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ 4
- –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ URL
- –ù–µ—Ç 404 –æ—à–∏–±–æ–∫

### ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω:
- –§–æ—Ä–º–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ 4
- –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ URL
- –ù–µ—Ç 404 –æ—à–∏–±–æ–∫

### ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏:
- –§–æ—Ä–º–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ 4
- –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ URL
- –ù–µ—Ç 404 –æ—à–∏–±–æ–∫

### ‚úÖ –†–∞–±–æ—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏:
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ URL
- –ù–µ—Ç 404 –æ—à–∏–±–æ–∫

---

## üìä –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

1. **calculator/js/calculator-fullscreen.js**
   - –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ `window.location.href`
   - –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ `window.history.back()`
   - –ó–∞–º–µ–Ω—ë–Ω `updateStepDisplay()` –Ω–∞ `goToStep(4)`
   - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã –∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –í—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ URL —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ –§–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –º–æ–¥–∞–ª–∫–∞
- ‚úÖ –ù–µ—Ç 404 –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ 4 –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
- ‚úÖ –†–∞–±–æ—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

### –£–¥–∞–ª–µ–Ω–æ:
- ‚úÖ 6 –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ URL
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `window.location.pathname` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- ‚úÖ –í—Å–µ `window.history.back()`

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ 4 —á–µ—Ä–µ–∑ `goToStep(4)`

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ URL –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã.**

–§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç **–¢–û–õ–¨–ö–û –∫–∞–∫ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ** –≤–Ω—É—Ç—Ä–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞:
- –ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ù–µ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ URL
- –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç 404 –æ—à–∏–±–∫–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —à–∞–≥ 4

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û**

---

**–û—Ç—á—ë—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** Senior Full-Stack Engineer  
**–î–∞—Ç–∞:** 2025-12-07

